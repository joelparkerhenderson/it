##
#
# AWS IAM users
#
##

resource "aws_iam_user_login_profile" "administrator" {
  user    = aws_iam_user.administrator.name
  pgp_key = "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"
  password_length = 32
  password_reset_required = true
  lifecycle {
    ignore_changes = [password_length, password_reset_required, pgp_key]
  }
}

output "aws_iam_user__administrator__encrypted_password" {
  value = aws_iam_user_login_profile.administrator.encrypted_password
}

resource "aws_iam_user_policy_attachment" "administrator__change_password" {
  user = aws_iam_user.me.name
  policy_arn = "arn:aws:iam::aws:policy/IAMUserChangePassword"
}
